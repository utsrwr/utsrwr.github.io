<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UTSRWR GIT</title>
<style>
  :root {
    --primary: #2563eb;
    --bg-gray: #f8fafc;
    --text-dark: #1e293b;
    --card-bg: #ffffff;
  }
  body { font-family: 'Segoe UI', sans-serif; background: var(--bg-gray); color: var(--text-dark); padding: 20px; margin: 0; }
  .container { max-width: 1200px; margin: 0 auto; }
  
  /* Navigasi Atas */
  .nav-box { background: white; padding: 20px; border-radius: 12px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
  .nav-links { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; }
  .nav-links a { text-decoration: none; background: #eff6ff; color: var(--primary); padding: 8px 15px; border-radius: 6px; font-size: 14px; font-weight: 600; transition: 0.2s; }
  .nav-links a:hover { background: var(--primary); color: white; }

  /* Grid Galeri */
  .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; }
  .card { background: white; border-radius: 12px; overflow: hidden; border: 1px solid #e2e8f0; transition: 0.3s; }
  .card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
  .card img { width: 100%; height: 200px; object-fit: cover; }
  .card-body { padding: 15px; font-size: 13px; }
  .card-title { font-size: 15px; font-weight: 700; margin-bottom: 10px; color: #0f172a; display: block; }
  .meta-tag { color: #64748b; margin-bottom: 5px; display: block; }
  .badge { display: inline-block; background: #dcfce7; color: #166534; padding: 3px 10px; border-radius: 5px; font-size: 11px; font-weight: 600; margin-top: 10px; }
</style>
</head>
<body>

<div class="container">
  <header style="text-align:center; margin-bottom:40px;">
    <a href="https://www.utsrwr.xyz" style="color:#94a3b8; text-decoration:none; font-size:12px;">¬© 2026 UTSRWR | All Rights Reserved</a>
  </header>

  <div id="nav-section" class="nav-box" style="display:none;">
    <div style="font-weight:700; color:#475569;">üìÑ HALAMAN LAINNYA</div>
    <div id="html-links" class="nav-links"></div>
  </div>

  <h2>üñºÔ∏è Galeri Visual Terverifikasi</h2>
  <div id="gallery" class="gallery"></div>
</div>

<script>
const settings = {
  user: "utsrwr",
  repo: "utsrwr.github.io",
  branch: "main",
  images: ["png", "jpg", "jpeg", "webp"],
  ignore: ["index.html", "googlea89e0d505ac08048.html"],
  defaultAuthor: "utsrwr.xyz",
  defaultLocation: "Indonesia"
};

fetch(`https://api.github.com/repos/${settings.user}/${settings.repo}/contents/?ref=${settings.branch}`)
  .then(res => res.json())
  .then(files => {
    const gallery = document.getElementById("gallery");
    const htmlLinks = document.getElementById("html-links");
    const navSection = document.getElementById("nav-section");
    const today = new Date().toISOString().split('T')[0];

    let hasPages = false;

    files.forEach(file => {
      const name = file.name;
      const nameLower = name.toLowerCase();

      // 1. Filter HTML (Kecuali index & google verif)
      if (nameLower.endsWith(".html") && !settings.ignore.includes(nameLower)) {
        hasPages = true;
        const a = document.createElement("a");
        a.href = name;
        a.textContent = name.replace(".html", "").toUpperCase();
        htmlLinks.appendChild(a);
      }

      // 2. Galeri dengan Metadata dari Nama File
      if (settings.images.some(ext => nameLower.endsWith(ext))) {
        
        // --- LOGIKA EKSTRAKSI TANGGAL ---
        // Mencari pola YYYY-MM-DD di awal nama file (cth: 2025-05-20-pantai.jpg)
        const dateMatch = name.match(/^(\d{4}-\d{2}-\d{2})/);
        const finalDate = dateMatch ? dateMatch[1] : today;
        const cleanName = dateMatch ? name.replace(dateMatch[0] + "-", "").split(".")[0] : name.split(".")[0];

        const card = document.createElement("div");
        card.setAttribute("vocab", "https://schema.org/");
        card.setAttribute("typeof", "ImageObject");
        card.className = "card";

        card.innerHTML = `
          <img src="${file.download_url}" alt="${cleanName}" property="contentUrl">
          <div class="card-body">
            <span property="name" class="card-title">${cleanName.replace(/-/g, ' ')}</span>
            <span class="meta-tag">üë§ Creator: <span property="author">${settings.defaultAuthor}</span></span>
            <span class="meta-tag">üìç Lokasi: <span property="contentLocation">${settings.defaultLocation}</span></span>
            <span class="meta-tag">üìÖ Tanggal: ${finalDate}</span>
            
            <meta property="datePublished" content="${finalDate}">
            <meta property="description" content="Foto ${cleanName} diunggah di ${settings.repo}">
            
            <div class="badge">‚úì Licensable</div>
          </div>
        `;
        gallery.appendChild(card);
      }
    });

    if (hasPages) navSection.style.display = "block";
  });
</script>

</body>
</html>
